@version: 4.8

# syslog-ng main configuration
options {
    time-reap(30);
    mark-freq(10);
    keep-hostname(yes);
};

# Sources: listen for syslog on UDP 514 and TCP 601
source s_network {
    udp(ip(0.0.0.0) port(514));
    tcp(ip(0.0.0.0) port(601));
};

# Destination: write all logs to a single file in a standard format
destination d_network_logs {
    file("/var/log/network/network.log"
        create-dirs(yes)
        perm(0644)
        template("${ISODATE} ${HOST} ${PROGRAM} ${MSG}\n")
        log-fifo-size(1000)
    );
};

# Example: add filters here to split logs by source, severity, etc.
# filter f_example { host("example-host"); };
# log { source(s_network); filter(f_example); destination(d_network_logs); };

# Example: forward logs to a remote syslog server
# destination d_remote { tcp("remote-syslog.example.com" port(514)); };
# log { source(s_network); destination(d_remote); };

log {
    source(s_network);
    destination(d_network_logs);
};

